# This script is designed to run on WSL (Windows Subsystem for Linux)
# and Debian-based Linux distributions.
#!/usr/bin/env bash

# Author: David (Davo) Faulkner
# Date Created: 01/19/2026
# Date Modified: 01/19/2026

# Description:
# This script automates the standard maintenance cycle for Debian-based
# distributions and WSL environments. It synchronizes local package metadata
# with upstream repositories, executes a non-interactive distribution-wide
# upgrade of all installed packages, and concludes by purging redundant
# dependency artifacts to maintain a minimalist system footprint.

# Usage:
# ud

# 1. Resynchronize the package index files from their sources via the
# network. This does not install new versions, but updates the local
# database of what software is available and which versions are current.
sudo apt update

# 2. Check if there are any packages available for upgrade.
UPGRADABLE=$(apt list --upgradable 2>/dev/null | grep -v 'Listing...')

if [ -n "$UPGRADABLE" ]; then
    echo "Proceeding with upgrade..."
    sudo apt upgrade -y
else
    echo "Upgrade skipped."
fi

# 3. Remove packages that were automatically installed to satisfy
# dependencies for other packages and are now no longer needed. This helps
# maintain a minimalist system by cleaning up orphaned libraries and tools.
echo "Removing any orphaned libraries and tools."
sudo apt autoremove
